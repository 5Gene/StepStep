# Step Framework - å¯è§†åŒ–æŒ‡å—

## ğŸ“Š æ¡†æ¶æ•´ä½“ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Step Framework                           â”‚
â”‚                    (Stepæµç¨‹ç®¡ç†æ¡†æ¶)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
                â–¼               â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   API    â”‚    â”‚  Engine  â”‚    â”‚  Steps   â”‚
         â”‚  å±‚       â”‚    â”‚   å±‚     â”‚    â”‚   å±‚     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒå·¥ä½œæµç¨‹

### 1. åˆ›å»ºé˜¶æ®µ

```
å¼€å‘è€…
  â”‚
  â”‚ è°ƒç”¨
  â–¼
StepApi.createStepEngineBuilder()
  â”‚
  â”‚ è¿”å›
  â–¼
StepEngineBuilder
  â”‚
  â”‚ addStep()
  â”‚ addStepAfter()
  â”‚ addStepBefore()
  â”‚
  â”‚ build()
  â–¼
StepEngine (å‡†å¤‡å°±ç»ª)
```

### 2. æ‰§è¡Œé˜¶æ®µ

```
å¼€å‘è€…è°ƒç”¨ engine.start()
         â”‚
         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  æ‰¾ç¬¬ä¸€ä¸ª   â”‚
   â”‚  å¯ç”¨æ­¥éª¤   â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  æ‰§è¡Œæ­¥éª¤ç”Ÿå‘½å‘¨æœŸ           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  1. isAvailable() â†’ true?   â”‚
   â”‚     â”œâ”€ true â†’ ç»§ç»­          â”‚
   â”‚     â””â”€ false â†’ è·³è¿‡         â”‚
   â”‚                              â”‚
   â”‚  2. onStepStarted(provider) â”‚
   â”‚     â”‚                        â”‚
   â”‚     â”‚ æ­¥éª¤æ‰§è¡Œä¸šåŠ¡é€»è¾‘       â”‚
   â”‚     â”‚                        â”‚
   â”‚     â””â”€ è°ƒç”¨ provideræ–¹æ³•    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚           â”‚               â”‚
     â–¼           â–¼               â–¼
  finish()  navigateBack()  abortStep()
     â”‚           â”‚               â”‚
     â”‚           â”‚               â”‚
     â–¼           â–¼               â–¼
   ä¸‹ä¸€æ­¥       ä¸Šä¸€æ­¥          ç»“æŸ
```

### 3. æ­¥éª¤ç”Ÿå‘½å‘¨æœŸè¯¦ç»†æµç¨‹

```
æ­¥éª¤A (æœªå¼€å§‹)
     â”‚
     â”‚ start() or finish()
     â–¼
isAvailable() æ£€æŸ¥
     â”‚
     â”œâ”€ false â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚
     â”‚ true                     â”‚ è·³è¿‡è¯¥æ­¥éª¤
     â–¼                          â”‚
onStepStarted(provider) â—€â”€â”€â”€â”€â”€â”€â”˜ æ£€æŸ¥ä¸‹ä¸€ä¸ª
     â”‚                          
     â”‚ æ­¥éª¤æ‰§è¡Œä¸­...            
     â”‚                          
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚              â”‚           â”‚
     â–¼              â–¼           â–¼
  finish()    navigateBack() abortStep()
     â”‚              â”‚           â”‚
     â–¼              â–¼           â–¼
onStepStopped() onStepStopped() cleanup()
     â”‚              â”‚           â”‚
     â–¼              â–¼           â”‚
  ä¸‹ä¸€æ­¥A+1       ä¸Šä¸€æ­¥        â”‚
     â”‚              â”‚           â”‚
     â”‚              â–¼           â”‚
     â”‚       onStepResumed()    â”‚
     â”‚              â”‚           â”‚
     â”‚              â”‚           â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
            â”‚                   â”‚
            â–¼                   â–¼
        ç»§ç»­æµç¨‹            æµç¨‹ç»ˆæ­¢
```

## ğŸ”„ æ­¥éª¤æ’å…¥æœºåˆ¶

### åŸºæœ¬æ’å…¥

```
åˆå§‹æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ B    â”‚ â†’ â”‚ C    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

addStepAfter<A>(X):
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ X    â”‚ â†’ â”‚ B    â”‚ â†’ â”‚ C    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

addStepBefore<C>(Y):
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ X    â”‚ â†’ â”‚ B    â”‚ â†’ â”‚ Y    â”‚ â†’ â”‚ C    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
```

### å†²çªæ£€æµ‹

```
âœ… å…è®¸çš„æ’å…¥:
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ B    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

addStepAfter<A>(X1):
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ X1   â”‚ â†’ â”‚ B    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

addStepAfter<X1>(X2):  â† ä¸åŒä½ç½®ï¼ŒOK
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ X1   â”‚ â†’ â”‚ X2   â”‚ â†’ â”‚ B    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

âŒ ä¸å…è®¸çš„æ’å…¥ (é»˜è®¤):
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ A    â”‚ â†’ â”‚ B    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜

addStepAfter<A>(X1):
addStepAfter<A>(X2):  â† åŒä¸€ä½ç½®ï¼Œå†²çªï¼æŠ›å‡ºå¼‚å¸¸
```

## ğŸ“ˆ æ•°æ®æµå‘

```
StepEngine
     â”‚
     â”‚ æ­¥éª¤å˜åŒ–
     â–¼
StateFlow<StepStepChange>
     â”‚
     â”‚ emit(å˜åŒ–)
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      StepStepChange          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  currentStep: StepStep?      â”‚
â”‚  previousStep: StepStep?     â”‚
â”‚  currentIndex: Int              â”‚
â”‚  totalSteps: Int                â”‚
â”‚  changeType: ChangeType         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ collect / observe
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        è§‚å¯Ÿè€… (Observers)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ UI Layer (æ›´æ–°ç•Œé¢)            â”‚
â”‚  â€¢ Logger (è®°å½•æ—¥å¿—)              â”‚
â”‚  â€¢ Analytics (æ•°æ®åˆ†æ)           â”‚
â”‚  â€¢ Navigator (é¡µé¢å¯¼èˆª)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ­ æ­¥éª¤çŠ¶æ€æœº

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”Œâ”€â”€â”€â”€â”‚  æœªå¼€å§‹ (-1) â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚
    â”‚  start()   â”‚
    â”‚            â–¼
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚   æ­¥éª¤ 0     â”‚â—€â”€â”
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚            â”‚          â”‚
    â”‚  finish()  â”‚          â”‚ navigateBack()
    â”‚            â–¼          â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚    â”‚   æ­¥éª¤ 1     â”‚â”€â”€â”˜
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚
    â”‚  finish()  â”‚
    â”‚            â–¼
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚   æ­¥éª¤ 2     â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚
    â”‚  finish()  â”‚
    â”‚            â–¼
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚  å·²å®Œæˆ (-1) â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ abort()
    â”‚
    â””â”€â–¶  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  å·²ä¸­æ­¢ (-1) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© ç±»å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StepApi     â”‚
â”‚   (Object)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ creates
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚StepEngineBuilder â”‚
â”‚                     â”‚
â”‚ + addStep()         â”‚
â”‚ + addStepAfter()    â”‚
â”‚ + addStepBefore()   â”‚
â”‚ + build()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ builds
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StepEngine      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  StepStep     â”‚
â”‚                     â”‚ manages â”‚   (interface)    â”‚
â”‚ + start()           â”‚         â”‚                  â”‚
â”‚ + abort()           â”‚         â”‚ + isAvailable()  â”‚
â”‚ + getCurrentStep()  â”‚         â”‚ + onStepStarted()â”‚
â”‚ + getStepChangeFlow()         â”‚ + onStepResumed()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + onStepStopped()â”‚
         â”‚                      â”‚ + cleanup()      â”‚
         â”‚ emits                â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ implements
â”‚ StepStepChange    â”‚                â”‚
â”‚   (data class)       â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚         â”‚  BaseMyStep    â”‚
â”‚ + currentStep        â”‚         â”‚  (abstract)     â”‚
â”‚ + previousStep       â”‚         â”‚                 â”‚
â”‚ + currentIndex       â”‚         â”‚ + finish()      â”‚
â”‚ + totalSteps         â”‚         â”‚ + navigateBack()â”‚
â”‚ + changeType         â”‚         â”‚ + abortStep()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + logX()        â”‚
         â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ observes                      â–²
         â–¼                               â”‚ extends
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   External           â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Observers          â”‚         â”‚  Custom Steps   â”‚
â”‚                      â”‚         â”‚  (ä¸šåŠ¡æ­¥éª¤)     â”‚
â”‚ â€¢ UI                 â”‚         â”‚                 â”‚
â”‚ â€¢ Logger             â”‚         â”‚ â€¢ WelcomeStep   â”‚
â”‚ â€¢ Analytics          â”‚         â”‚ â€¢ PermissionStepâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ ConnectionStepâ”‚
                                 â”‚ â€¢ ...           â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ä½¿ç”¨æµç¨‹å›¾

### åœºæ™¯1: ç®€å•çš„Stepæµç¨‹

```
å¼€å‘è€…                    MyStep Framework
  â”‚                             â”‚
  â”‚ 1. åˆ›å»ºå¼•æ“                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚   MyStepApi.create...      â”‚
  â”‚                             â”‚
  â”‚ 2. æ·»åŠ æ­¥éª¤                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚   .addStep(Step1)           â”‚
  â”‚   .addStep(Step2)           â”‚
  â”‚                             â”‚
  â”‚ 3. æ„å»º                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚   .build()                  â”‚
  â”‚                             â”‚
  â”‚ 4. ç›‘å¬å˜åŒ–                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚   .getStepChangeFlow()      â”‚
  â”‚                             â”‚
  â”‚ 5. å¯åŠ¨                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
  â”‚   .start()                  â”‚
  â”‚                             â”‚
  â”‚                        æ‰§è¡ŒStep1
  â”‚                             â”‚
  â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   é€šçŸ¥: Step1 Started      â”‚
  â”‚                             â”‚
  â”‚                        Step1å®Œæˆ
  â”‚                             â”‚
  â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   é€šçŸ¥: Step2 Started      â”‚
  â”‚                             â”‚
  â”‚                        Step2å®Œæˆ
  â”‚                             â”‚
  â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   é€šçŸ¥: Completed          â”‚
  â”‚                             â”‚
```

### åœºæ™¯2: åŠ¨æ€æ’å…¥æ­¥éª¤

```
åŸºç¡€æ­¥éª¤: [A, B, C]
         â”‚
         â”‚ addStepAfter<A>(X)
         â–¼
     [A, X, B, C]
         â”‚
         â”‚ addStepBefore<C>(Y)
         â–¼
    [A, X, B, Y, C]
         â”‚
         â”‚ build()
         â–¼
    æœ€ç»ˆæ­¥éª¤åºåˆ—
```

### åœºæ™¯3: è¿”å›ä¸Šä¸€æ­¥

```
å½“å‰åœ¨Step3
    â”‚
    â”‚ ç”¨æˆ·ç‚¹å‡»"è¿”å›"
    â–¼
navigateBack()
    â”‚
    â”œâ”€ Step3.onStepStopped()
    â”‚
    â”œâ”€ ä»å†å²æ ˆpopå‡ºStep2çš„ç´¢å¼•
    â”‚
    â””â”€ Step2.onStepResumed()
        â”‚
        â””â”€ ç”¨æˆ·å¯ä»¥é‡æ–°æ“ä½œStep2
```

## ğŸ“± å®é™…ä½¿ç”¨ç¤ºä¾‹æµç¨‹

### è®¾å¤‡é…å¯¹æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è®¾å¤‡é…å¯¹Stepæµç¨‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  [æ¬¢è¿é¡µé¢]  â†’ [æƒé™ç”³è¯·] â†’ [è®¾å¤‡æœç´¢] â†’ [è®¾å¤‡è¿æ¥]          â”‚
â”‚      â†“            â†“           â†“            â†“                 â”‚
â”‚  WelcomeStep  PermissionStep SearchStep ConnectionStep      â”‚
â”‚                                                               â”‚
â”‚  â†’ [é…ç½®åŒæ­¥] â†’ [å®Œæˆé¡µé¢]                                   â”‚
â”‚       â†“            â†“                                          â”‚
â”‚   ConfigStep   CompleteStep                                  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä»£ç å®ç°:
val engine = MyStepApi.createStepEngineBuilder()
    .addStep(WelcomeStep())
    .addStep(PermissionStep(permissions))
    .addStep(SearchStep())
    .addStep(ConnectionStep(deviceMac))
    .addStep(ConfigStep())
    .addStep(CompleteStep())
    .build()

engine.start()
```

## ğŸ¨ DSLé£æ ¼å¯¹æ¯”

### ä¼ ç»Ÿé£æ ¼

```kotlin
val builder = MyStepApi.createStepEngineBuilder()
builder.addStep(Step1())
builder.addStep(Step2())
builder.addStep(Step3())
val engine = builder.build()
```

### é“¾å¼é£æ ¼

```kotlin
val engine = MyStepApi.createStepEngineBuilder()
    .addStep(Step1())
    .addStep(Step2())
    .addStep(Step3())
    .build()
```

### DSLé£æ ¼ â­

```kotlin
val engine = MyStepApi.createStepEngineBuilder {
    step(Step1())
    step(Step2())
    stepAfter<Step1>(Step1_5())
    step(Step3())
}.build()
```

## ğŸ“Š å†…å­˜å’Œæ€§èƒ½

### å†…å­˜å ç”¨

```
MyStepEngine å®ä¾‹
â”œâ”€ steps: List<MyStepStep>        (nä¸ªæ­¥éª¤)
â”œâ”€ executionStack: List<Int>       (æœ€å¤šnä¸ªç´¢å¼•)
â””â”€ _stepChangeFlow: StateFlow      (1ä¸ªå¯¹è±¡)

æ€»å†…å­˜ â‰ˆ O(n) + å¸¸é‡
```

### æ—¶é—´å¤æ‚åº¦

```
æ“ä½œ                æ—¶é—´å¤æ‚åº¦      è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
addStep()           O(1)          ç›´æ¥æ·»åŠ åˆ°åˆ—è¡¨
addStepAfter()      O(1)          è®°å½•æ’å…¥ä¿¡æ¯
addStepBefore()     O(1)          è®°å½•æ’å…¥ä¿¡æ¯
build()             O(nÂ²)         æ„å»ºæ­¥éª¤åˆ—è¡¨ï¼ˆæœ€åï¼‰
start()             O(n)          æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¯ç”¨æ­¥éª¤
finish()            O(n)          æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå¯ç”¨æ­¥éª¤
navigateBack()      O(1)          ä»æ ˆä¸­pop
abort()             O(n)          æ¸…ç†æ‰€æœ‰æ­¥éª¤
```

## ğŸ¯ è®¾è®¡åŸåˆ™ä½“ç°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SOLID åŸåˆ™                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  S - å•ä¸€èŒè´£                                      â”‚
â”‚      MyStepStep: åªè´Ÿè´£æ­¥éª¤é€»è¾‘                  â”‚
â”‚      MyStepEngine: åªè´Ÿè´£æµç¨‹ç®¡ç†                â”‚
â”‚                                                    â”‚
â”‚  O - å¼€é—­åŸåˆ™                                      â”‚
â”‚      å¯¹æ‰©å±•å¼€æ”¾: å¯è‡ªå®šä¹‰æ­¥éª¤                     â”‚
â”‚      å¯¹ä¿®æ”¹å°é—­: ä¸éœ€è¦ä¿®æ”¹æ¡†æ¶ä»£ç                â”‚
â”‚                                                    â”‚
â”‚  L - é‡Œæ°æ›¿æ¢                                      â”‚
â”‚      BaseMyStepå¯ä»¥æ›¿æ¢MyStepStep              â”‚
â”‚                                                    â”‚
â”‚  I - æ¥å£éš”ç¦»                                      â”‚
â”‚      MyStepStep: æ­¥éª¤æ¥å£                        â”‚
â”‚      MyStepCompletionProvider: æ§åˆ¶æ¥å£          â”‚
â”‚                                                    â”‚
â”‚  D - ä¾èµ–å€’ç½®                                      â”‚
â”‚      ä¾èµ–æŠ½è±¡æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°                 â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒŸ æ€»ç»“

MyStep Framework æä¾›äº†ä¸€ä¸ªæ¸…æ™°ã€ä¼˜é›…çš„Stepæµç¨‹ç®¡ç†è§£å†³æ–¹æ¡ˆï¼š

```
     ç®€å•æ˜“ç”¨          åŠŸèƒ½å¼ºå¤§         æ‰©å±•æ€§å¥½
        â”‚                â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  MyStep       â”‚
        â”‚  Framework     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        â”‚        â”‚
        â–¼        â–¼        â–¼
      APIå±‚   Engineå±‚  Stepså±‚
```

**æ ¸å¿ƒä»·å€¼**:
1. âœ… 100%å®ç°Google Step SDKçš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
2. âœ… æ›´ç°ä»£çš„Kotlin APIè®¾è®¡
3. âœ… å®Œå…¨ç‹¬ç«‹ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–
4. âœ… è¯¦å°½çš„æ–‡æ¡£å’Œç¤ºä¾‹
5. âœ… ç”Ÿäº§çº§åˆ«çš„ä»£ç è´¨é‡

**é€‚ç”¨åœºæ™¯**:
- è®¾å¤‡é…å¯¹æµç¨‹
- ç”¨æˆ·å¼•å¯¼æµç¨‹  
- å‘å¯¼å¼é…ç½®
- å¤šæ­¥éª¤è¡¨å•
- ä»»ä½•éœ€è¦æµç¨‹ç®¡ç†çš„åœºæ™¯

---

ğŸ‰ **ç°åœ¨å°±å¼€å§‹ä½¿ç”¨MyStep Frameworkæ„å»ºä½ çš„Stepæµç¨‹å§ï¼**

